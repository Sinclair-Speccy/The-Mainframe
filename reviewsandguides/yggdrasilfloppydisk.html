<div class="body-wrapper">
  <header>
	  <title>Making a Yggdrasil floppy disk image</title>
    <h1 class="title text-centre">The Mainframe</h1>
	<link rel="stylesheet" href="Main.css">
	  <link rel="shortcut icon" type="image/x-icon" href="https://raw.githubusercontent.com/Sinclair-Speccy/The-Mainframe/main/Images/Icons/diskettes.ico">
  <nav role='navigation'>
    <ul>
      <li><a href="https://sinclair-speccy.github.io/The-Mainframe/index.html" title="Home">Home</a></li>
					<li><a href="https://sinclair-speccy.github.io/The-Mainframe/usefullinks.html" title="Useful Links">Useful Links</a></li>
					<li><li><a href="https://sinclair-speccy.github.io/The-Mainframe/aboutme.html" title="About me">About me</a></li></li>
					<li><a href="https://sinclair-speccy.github.io/The-Mainframe/projects.html" title="Personal projects">Personal projects</a></li>
					<li><a href="https://sinclair-speccy.github.io/The-Mainframe/reviewsandguides.html" title="Reviews and Guides">Reviews and Guides</a></li>
		<li><a href="https://sinclair-speccy.github.io/The-Mainframe/oldupdates.html" title="OldUpdates">Old Updates</a></li>
    </ul>
  </nav>	
  </header>
  <main>
    <article>
      <h1 class="title">Making a Yggdrasil floppy disk image (and maybe some other distros)</h1>
      <p>Yggdrasil Linux, or Yggdrasil Linux/GNU/X, is a funny distro but you could also call it a revolutionary step in Linux history. Yggdrasil Computing, Incorporated was the first company to create a live CD Linux distribution which lead to Debian and many others making live CDs for their distros. Yggdrasil Linux described itself as a Plug-and-Play Linux distribution, automatically configuring itself for the hardware.</p>
		
	 <p>Pretty cool, right? There is a Wikipedia article on it if you ever wish to read more but this guide isn't to tell you about Yggdrasil, it is about making a bootable floppy disk to run Yggdrasil from the CD drive since unlike modern distros, it can't manually run from the CD drive without support.</p>
		
	<p>This guide doesn't run over on how to install Yggdrasil as that is for my review on the OS itself or maybe another guide.</p>
		
	<p>-----------------------------------------------------------------------------------------------------------------------</p>
	
	<h3>1. Checking that everything is set-up before starting</h3>
	
	<p>Before getting into making the floppy, you should check if 86box is set up to make sure it has specific settings correct for the machine we will be emulating. The settings I have used for 86box are below</p>
	
	<h3>Machine</h3>
		
	<p>The machine type should be set to Socket 7 (Dual Voltage).</p>
<img src="Photos/Yggdrasil/Make floppy disk/Machine.PNG" alt="" class="responsive"/>
<p>Along with this, you should have as your machine set as the Asus P/-PI65UP5 (C-P55T2D). For the CPU model set it to AMD K6 (Model 6) with the speed set to 233. </p>
	<p>Max out the memory to 128MB and disable time synchronization.</p>
		
	<h3>Display</h3>
		
    <p>The video card we will use for this emulation is the Trident TVGA 8900D. The other settings such as XGA are not required. </p>
  <img src="Photos/Yggdrasil/Make floppy disk/Display.PNG" alt="" class="responsive"/>
		
<h3>Input devices</h3>
		
    <p>For the input device, aka the mouse, use the Microsoft Bus Mouse (InPort) as it isn't broken as the others. </p>
<img src="Photos/Yggdrasil/Make floppy disk/Input devices.PNG" alt="" class="responsive"/>
		
 <h3>Sound</h3>
		
<p>For the sound card, use Sound Blaster AWE32 PnP. Although sound is not really required I add a sound card every time I set up a emulator.</p>
<img src="Photos/Yggdrasil/Make floppy disk/Sound.PNG" alt="" class="responsive"/>
		
 <h3>Network</h3>
		
<p>We will not need to use this.</p>
		
<h3>Ports (COM and LPT)</h3>
		
<p>We will not need to use this.</p>
		
<h3>Storage conrtollers</h3>
		
<p>If this is your first time using 86box, double check that the FD Controller is set to the internal cotroller</p>
<img src="Photos/Yggdrasil/Make floppy disk/Storage conrtollers.PNG" alt="" class="responsive"/>
		
<h3>Hard disks</h3>
		
<p>For me personally I make 560MB hard disks to install every package but you do not have to do this so you can do your own size if desired, but set the bus for the hard disk to IDE and ID to 0:0. The image format should be .img. Depending on the version of 86box you have it may ask for the hard disk speed. Just select max for it. If you do not have enough space you may choose to do a smaller size.</p>
		
<img src="Photos/Yggdrasil/Make floppy disk/Hard disks.PNG" alt="" class="responsive"/>
		
<p>The file location should be set to where you saved it on your PC.</p>
		
<h3>Floppy and CD-ROM drives</h3>
		
<p>For the floppy we will need 1 3.5” 2.88M floppy drive with turbo enabled and check BPB enabled. I usually do 2 3.5” 2.88M floppy drives. You can select the floppy type from clicking on type and it will be at the bottom.</p>

<p>For the CD-ROM drive, you'll need One ATAPI CD-ROM drive set to channel 0:1 with 72x speed.</p>

<img src="Photos/Yggdrasil/Make floppy disk/Floppy & CD-ROM drives.PNG" alt="" class="responsive"/>
		
<p>Double check everything is right and press OK at the bottom. You will be asked if you want to save the settings, doing so will reset the emulated machine. Click on save and the machine will restart.</p>
		
<h3>2. Booting the machine</h3>

<p>As the machine boots you will notice that when it is detecting hardware, the HDD primary master should say something along the lines of 86B_HD00 and the HDD primary slave should be none if you have forgotten to add the CD-ROM when setting up. If the CD-ROM was added correct you should get something like this:</p>
	
<img src="Photos/Yggdrasil/Make floppy disk/First boot.PNG" alt="" class="responsive"/>

<p>If you let the machine boot for the first time by continuing with pressing f1, you may notice a screen that says “DISK BOOT FAILURE, INSERT SYSTEM DISK AND PRESS ENTER” along with some other info:</p>

<img src="Photos/Yggdrasil/Make floppy disk/DISK BOOT FAILURE, INSERT SYSTEM DISK AND PRESS ENTER.PNG" alt="" class="responsive"/>
		
<p>We need to fix the BIOS so restart the emulated machine by going to a little icon at the top of the emulator that looks like a blue arrow going in a circle next to the pause button and click it. You will be asked if you want to hard reset the emulated machine, just press reset and it should restart.</p>

<p>When it starts again with checking the memory and hardware, press the delete key quickly to access the BIOS. The BIOS should show how to navigate so use the arrow keys to go to the IDE HDD AUTO DETECTION section.</p>
		
<img src="Photos/Yggdrasil/Make floppy disk/BIOS.PNG" alt="" class="responsive"/>
		
<p>Press enter and you will be at a rather confusing screen so if you are new to this, do not freak out at this as you will get used to it once you do it enough times.</p>
		
<img src="Photos/Yggdrasil/Make floppy disk/IDE HDD AUTO DETECTION.PNG" alt="" class="responsive"/>
		
<p>It is first asking for you to select the primary master disk and sin the setup we selected IDE for the hard disk, it will be automatically detected.</p>
		
<img src="Photos/Yggdrasil/Make floppy disk/Configuring hard disks.gif" alt="" class="responsive"/>
		
<p>Press 1 which will select the “normal” mode then press enter. The screen will now show some things, and this should be what you selected before. For the others, just press esc as it is set to no by default. You will be now out of the hard disk setup screen and back to the BIOS as before.</p>
		
<p>Now go to the STANDARD CMOS SETUP to set up the floppy drives.</p>
		
<img src="Photos/Yggdrasil/Make floppy disk/STANDARD CMOS SETUP.PNG" alt="" class="responsive"/>
		
<p>At this screen it should show the primary master hard disk we configured just before and now we just need to do the floppy disks. Use the arrow keys to make your way down to “Drive A” and use the page up or page down button until “Drive A” is set to 2.88M, 3.5 in. </p>
		
<img src="Photos/Yggdrasil/Make floppy disk/Drive A set correctly.PNG" alt="" class="responsive"/>
		
<p>Press the esc key to leave this screen. Everything should be set up and ready to go now. Go to SAVE and EXIT SETUP, put in y and press enter.</p>
		
<p>From this point, if you let the machine boot after detecting hardware and such, you should have a screen that has a lot of stuff on it explaining the system configuration showing the display type and all. This was shown before you get the boot disk failure error. It should also show the primary master disk and primary slave disk so if you missed it when it was checking hardware that is okay as it will appear again but look different with the primary master disk being something along the lines of CHS,Mode4,586MB and the primary slave disk being CDROM,Mode 4. It will also show the PCI device listing which simply just shows other stuff about the hard disk.</p>
		
<p>You may notice that you still have “DISK BOOT FAILURE, INSERT SYSTEM DISK AND PRESS ENTER” on your screen still. This is normal if the hard disk has nothing installed on it as that is when we install MS-DOS.</p>
		
<h3>3: Installing MS-DOS and the CD-ROM driver</h3>

<p>Before we can even do much after the machine has booted, we will need to install MS-DOS 6.22 along with a CD-ROM driver so the machine can read the CD-ROM. You can grab a copy of MS-DOS 6.22 from WinWorld. I recommend using <a href="https://winworldpc.com/download/c38fc38d-68c2-bbe2-80a6-4b11c3a4c2ac">‘Microsoft MS-DOS 6.22 Plus Enhanced Tools'</a> as 1, it has the most downloads and 2, it works the best for me.</p>
		
<p>Downloading it will give you a .7z archive so you can either use 7zip to open it or <a href="https://extract.me/">extract.me</a> which is a site I use to unpack 7z files when I am not at a computer with 7zip installed. Extract.me just extracts the archive and puts it into a zip file that Windows can open, unlike a .7z file that needs 7zip to open. If using extract.me, use Windows to extract the folder to a place on your computer when it makes it a zip file to extract it. The same can be said for 7zip when extracting it.</p>

<p>In 86box, you can load .img files in two separate ways:</p>
		
<p>Using the little floppy icons at the bottom of 86box which will be greyed out when nothing is in it</p>

<img src="Photos/Yggdrasil/Make floppy disk/Floppy bottom.PNG" width="135" height="31" alt=""/>
		
<p>Or by going to top and clicking on media, hovering over floppy 1 and clicking on existing image.</p>
		
<img src="Photos/Yggdrasil/Make floppy disk/Floppy top.PNG" width="478" height="188" alt=""/>
		
<p>We will be using the first way mentioned so select disk1.img from the MS-DOS folder and you should see the floppy icon at the bottom be coloured. Hover over it to make sure you have selected the right one which should be labelled disk1 and then press enter.</p>
		
<p>The emulator screen will go black for a moment before showing “Starting MS-DOS” and then going to the beginning of the installation. </p>

<img src="Photos/Yggdrasil/Make floppy disk/Starting MS-DOS.gif" alt="" class="responsive"/>
		
<p>You should be greeted with a blue screen that welcomes you to the set-up. If you are new to MS-DOS, you should read the text on the welcome screen before proceeding. </p>
		
<p>Pressing enter will take us to the next few parts of the set up.</p>
		
<img src="Photos/Yggdrasil/Make floppy disk/Configure disk space.PNG" alt="" class="responsive"/>
		
<p>After the welcome screen, the setup needs to configure the unallocated space on the hard disk. Just hit enter and it will explain it needs to restart the computer. Do not remove the floppy from the drive and continue again by pressing enter. The machine will go through the same usual process from before going back to the set up. </p>
		
<p>Sometimes you may get an error that tells you to press A to reboot when the machine restarts to configure the disk space. Just go back to the bios, head to BIOS FEATURES SETUP and change the boot sequence to A,CDROM,C and save the settings, exiting the bios and restarting the machine again.</p>
		
<p>Back at the install, it explains that it will use certain system settings however just ignore this and continue.</p>

<img src="Photos/Yggdrasil/Make floppy disk/System settings.PNG" alt="" class="responsive"/>
		
<p>Next, it says where it will install the MS-DOS files and here, I just go with the default directory.</p>
	
<img src="Photos/Yggdrasil/Make floppy disk/MS-DOS install location.PNG" alt="" class="responsive"/>
	  
<p>Once you have selected the directory you want to use just go on and it will begin to install. Since we set the CPU speed to the max the installation should be quicker than using the default speed.</p>
		
<img src="Photos/Yggdrasil/Make floppy disk/MS-DOS installing.PNG" alt="" class="responsive"/>
		
<p>During the installation it will ask for the other two setup disks. Just do the same process that was used when putting the floppy disk for the first time and press enter for both when prompted</p>
		
<img src="Photos/Yggdrasil/Make floppy disk/Asking for disk 2.PNG" alt="" class="responsive"/>
		
<p>Once the installation has completed you must remove all floppies from the drives which can done by going to the floppy icon, clicking on it, and pressing eject. MS-DOS 6.22 will now be installed on your computer, and you can restart the machine by pressing enter or manually doing it by heading over to the reset button at the top we used when setting up.</p>
		
<p>Now the CD-ROM driver. You can grab one from the internet archive from <a href="https://archive.org/details/cd-driver-1.25">here</a>. Once downloaded, head back to 86box and load the floppy to install the drivers into the emulated machine.</p>
		
<img src="Photos/Yggdrasil/Make floppy disk/MS-DOS.PNG" alt="" class="responsive"/>
		
<p>An effective way to see the contents of a floppy is by typing “dir | more”.</p>
		
<img src="Photos/Yggdrasil/Make floppy disk/Listing dir.gif" alt="" class="responsive"/>
		
<p>Since this may be your first time using MS-DOS, this is a good command to know. To install the driver type install.exe, press enter, make sure the installed directory is “C:\CDROM” and press enter again. It should say it completed installed when finished and go back to the A drive.</p>
		
<img src="Photos/Yggdrasil/Make floppy disk/Install CD-ROM.gif" alt="" class="responsive"/>

<p>Just press enter, remove the floppy (if you do not you will get some weird display errors, but it is kind of cool) and restart the machine as we need to see if it was installed correctly.</p>
		
<p>When MS-DOS boots it should come up with a screen saying things about a CD-ROM device driver. It will also show the drive for the optical drive which is usually D:</p>
		
<img src="Photos/Yggdrasil/Make floppy disk/CD-ROM driver installed correctly.PNG" alt="" class="responsive"/>
		
<h3>4: Making the Yggdrasil boot floppy</h3>
		
<p>Now with the MS-DOS and CD-ROM driver installation out of the way, the next part is to create a boot floppy for Yggdrasil Linux. Yggdrasil Linux is not like most modern Linux distros we have today where it automatically boots from say a CD/DVD or USB but instead it requires a boot floppy to boot. You may have to look around for a blank 2.88MB 3.5in floppy but once you find onem ut the blank floppy into the first floppy drive and the Yggdrasil CD-ROM into the D: drive.</p>
		
<p>Loading an iso image (optical disc image) is the same as we did for the floppy images but instead, click on the little CD next to the floppy, click “image” and find the Yggdrasil CD-ROM we are using for this guide which should be named “yggdrasil-fall95revb-disk1.iso”.</p>
		
<p>Type D:, press enter to access the driver where the CD-ROM is and type “dir | more” to see the contents of the floppy. I would recommend having something like notepad open as we will need to take note of two files on the CD-ROM. The two files you will need remember are “BOOTFLOP.3IN” and “RAWRITE.EXE”. If you are curious, BOOTFLOP.3IN is basically just the boot floppy image for 3.5” floppies and RAWRITE is the program we will use to write BOOTFLOP.3IN to the floppy. Press enter until you are back at the D:\> prompt.</p>
		
<img src="Photos/Yggdrasil/Make floppy disk/CD-ROM contents.gif" alt="" class="responsive"/>
		
<p>Now, to make the floppy itself. Type RAWRITE.EXE into MS-DOS and type BOOTFLOP.3IN as the source file when asked, then type A: for the destination drive if that is where you inserted the blank floppy image, press enter again and when prompted, press enter. You should see RAWRITE doing some funky things as in writing the image to the floppy.</p>
		
<img src="Photos/Yggdrasil/Make floppy disk/Making boot floppy.gif" alt="" class="responsive"/>
		
<p>It should say done when it is completed. You can check that the image was written to the floppy by going back to the A drive and using dir | more to see the contents. Now you have a Yggdrasil Linux boot floopy which can be used for running Yggdrasil from the CD-ROM. When you do run Yggdrasil you will also need to have the Yggdrasil CD-ROM in the emulator.</p>
</main>
  <aside>
		<article>
			<h3 class="title">Updates</h3>
      <p>Sepetember 20, 2022:</p>
	<p><a href="https://sinclair-speccy.github.io/The-Mainframe/200922.html" title="September 20, 2022 Update">The site got an update!</a></p>
	<p>October 1, 2022:</p>
	<p><a href="https://sinclair-speccy.github.io/The-Mainframe/yggdrasilfloppydisk.html" title="October 1, 2022 Update">First guide is up and running.</a></p>
      <p>November 16, 2022:</p>
	<p><a href="https://sinclair-speccy.github.io/The-Mainframe/thetechdeck.html" title="November 16, 2022 Update">Added the Tech Deck.</a></p>
			<p>November 26, 2022:</p>
	<p><a href="https://sinclair-speccy.github.io/The-Mainframe/261122.html" title="November 26, 2022 Update">More pages and extras!!</a></p>
			<p>December 22, 2022:</p>
	<p><a href="https://sinclair-speccy.github.io/The-Mainframe/221222.html" title="December 22, 2022 Update">Chatbox added!</a></p>
      <h3 class="title">Yo, can I link back to your site?</h3>
      <p>Sure! Just use the code below!</p>
		
		<p>&lt;a href="https://sinclair-speccy.github.io/The-Mainframe/index.html" target="_blank"> &lt;img src="https://raw.githubusercontent.com/Sinclair-Speccy/The-Mainframe/main/Images/Buttons/The-Mainframe-Button.png" width="88" height="31"&lt;</a>&gt;</p>
	
	<a href="https://sinclair-speccy.github.io/The-Mainframe/index.html" target="_blank"><img src="https://raw.githubusercontent.com/Sinclair-Speccy/The-Mainframe/main/Images/Buttons/The-Mainframe-Button.png" width="88" height="31"></a>
	 <h3 class="title">The Yesterweb Webring</h3>
<p><a href="https://webring.yesterweb.org/noJS/index.php?d=prev&url=https://yesterweb.org/">Previous</a>
                        <a href="https://webring.yesterweb.org/noJS/index.php?d=rand&url=https://yesterweb.org/">Random</a>
                        <a href="https://webring.yesterweb.org/noJS/index.php?d=next&url=https://yesterweb.org/">Next</a></p>
<h3 class="title">To-do list</h3>
<ul>
        <li>Test out making a radio on the test page.</li>
	<li>Add a blatherings section for stuff.</li> 
<li>Add a commnets section on the reviews and guides?</li>
<li>Add a section for last update and visitors???</li>
<li>Somehow put a analytics page to this website.</li>
<li>Put some web badges & internet bumper stickers alongside the web buttons on the corkboard.</li>
<li>Put falling items on some sections for certain events/holidays.</li>
<li>Create a page dedicated to my personal history on the net. Might work best on the blatherings page.</li></ul>
	</article>
  </aside>
  <footer>
	<h3 class="title">Site template goes to <a href="https://codepen.io/Puika/pen/dyJKGL">Fabian</a> because I can't code CSS for heck</h3>
  </footer>
</div>